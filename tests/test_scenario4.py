"""
Test script for Scenario 4: Side Effect Healing Tracker (with images)
Tests the full workflow with action="side_effect" and temporal photo monitoring
"""
import sys
import os
sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'backend'))

from backend.agents.agent_init import initialize_agents
from backend.agents.base_agent import orchestrator

def test_scenario4():
    """Test scenario 4: patient reports allopurinol rash with daily photo monitoring"""
    
    print("=" * 80)
    print("Testing Scenario 4: Side Effect Healing Tracker (with images)")
    print("=" * 80)
    
    # Initialize agents
    print("\n1. Initializing agent system...")
    initialize_agents()
    print(f"   ✓ Initialized {len(orchestrator.agents)} agents")
    
    # Realistic synthetic dermatology images showing healing progression (generated, open-source)
    # These are programmatically generated synthetic medical images (no copyright issues)
    # Day 3: Red pixel (representing inflamed rash)
    mock_image_day3 = "data:image/jpeg;base64,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"
    # Day 4: Orange pixel (representing slight improvement)
    mock_image_day4 = "data:image/jpeg;base64,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"
    # Day 5: Light pink pixel (representing significant healing)
    mock_image_day5 = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCADgAOADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD6g70n4Cl7UV4p7wd896MD/CgAelFACDgAYApawvHWrXmj6BJdWUW+VnEe8jIiBz85H5AZ4yR16Gl8Odc1DWrC4/tBN7QOFW4CbRJnJIwBjI46diPqQvkfLzGl4s8Q2vh6wW4uEeaSVisUSMAWIBOTn+HoCQDjI4qr4O8VWfiJZI44GtrmFQzRM4OVJIyp6kDAzwMZFL458NjxHYxIkyw3MDM0bsCQcjlTg8AkLzg4x0qn4B8It4eaa7u54pruVBGBGDtjXOSAT97OF7DGKrSxolT9n5nWenApe1GTjn8aKkwA9aBmijnOT+NABR0GB0oooAOBwOlKe/JpOMUHk57+tAB0GBVfUbyGwsJr25OI4ULtyMn2GccnoPc1YGcVmeK7CXU/D95ZQH946AoP7zKQwHJHXGM9s00VFJtXPPL/AMca5PcGS2ljs4xwsaRq2BnuWByeg4wOOgrsvBPiT+3YZYriKKG7h5IQ4V1J4KgnPHQ/h64HlEqPHKySoySISrKwwQe4PvXd/CnTbhZ7jVpFZIWj8mPI/wBYdwJI+m0D8T6GtJJWO6vTgoXsegUAADAoHAx2pB24FZHni0DOKO/HSjtQAdqPfvQAMdOlHFAB+AooHAxRQAgA44HFLz3o70d80AHPejnNH40dqAGyRxywtFKiujrtZGGVIPUEdxTbaCC2hWG3hjhiXO1I1CqMnJwB71J/KigYHrmijvmgdKBB2pB24FL04A4o9h0oAKKDyc96O+f1oAKO+f1oA4HGKOaADtQeuaKOvJ60AKe/JpP50dDgdKO/SgCrdafYXcgku7G1ncLjdJErED0yR05NWj1pAOnA6UtMdwwO1IO3ApfwFBpCAk5ooHTnrRk45oATHI4FLQetB6+1AAetB60nPBIFKfrQAdOB0o/lQcZz3pMdOB0oAU/WgD2o7570dqADn8KO1Hej8KACg9aB0xRQAZOaCTn2o7UUAHHajJ70g4wMCloAB0x09qOe9HagAYHGDQAd6D1z39aO9HegAHAx09qBwMDpS/iaQ9c9fegAGe9A6VDe3MFnbSXV1KsUMYyzt2/z6UzTb+z1G1FzYzrNCSVyARgjsQeR+NMZZ4zmjtRzR36UhB1OT19aKD1ooAMDt+FGB6Cj27UDGKADnNFLnryaTqcnr60AFFHfPejA7dulAB7nrR0GBQeuetFABxQBwOKPYdKBmgA56nrRgf4UYA6fhQAAOmKADJ7/AI0HrnvRQetABznmjpwOlIB04FLgf4UAB+tA6elHbFcz468UnQIIoreOOa9n+YK5yqKDyWAIPPQfjzxgtK5UYuTsjpvp0oryHTfHuv21yr3MsV5F0aJ41XjIzgqBg445yOehr1bTL2DUNPgvbZswzIHXkZHsccZHIPoRTaaLqUZU9yx2oye9FHU5PWpMjI8WaMNb0k2iy+VIjiSIkfLuAIwfbk9P16VW8F+H30O2nNxOstzORv2fcUDOMEjJPPP/ANbJ6ADgcDNHFMrmdrCenApcc8DigdKO/HSkSJjpgDFL2xXG/EWy1a6e3a2jmntAMGKJSxD8/MQOemAD256Z56TQI76HR7aPUnD3SpiQ7s9+AT3IGAT7d+tO2hTWly8OmKOvJ60dOnSgcDHSkSGB2owB0HSjryetFAHC+OvHM+i6odM062gmmjVWmkmLEKSCdu0YycFTnPfGK6PwnrkXiHSF1COPym8xo5I9xbYw7ZwM5BB/HFZXjDwRZ+ILwXyXTWd1tVHYRBldRnkjg7ugznoAMVueHtItND0tNPsw3lqSxZ8bmJPUkAZPQdOgFdE3S9muXc2k6fIrbmhR9OlHNHGc965zEO+e9GAOgoHSjtQAHr/Wg9c96Oep/Gj8aADAo78dKPc9aOe9AB1OT1pMYxgCjnIJApaADJxzXnPxf0u5a4t9YjVpIFj8mUgf6shiVJ+u4j2wPUV6MOlA6U07GlObhLmPnmKN5ZUiiRndyFRVGSxPQAV7h4Q06XSvDdlYTH95GhLjj5WYlivBIOM4z7Vbs9N06ykMllp9pbMV2looVQkenA6VaA6cDpTlK5pWr+0VkhaOKO9HPepOcB9KQDGOBSjpjp7UUAGBngVk6p4j0XTbs2t7fLHMACVCMxGemdoOPp9K1z35NeEalDd29/PDfLItyrnzRIcsSeck989c985q4RUi4xue6RukqLLG6ujruV1OQQehB9Kd2rmPhnBdweGQLlZFR5meAOf+WZAwQOwJ3H8c966fmpas7EtWYdqDjOaOc0g4xwBxSEL3zQOlHNHbAoAKPwryHUfH2v3Fyz2s8dnF0WJIlbjJwSWBycYHGBx0Fdv4E8Uf2/DNDcRxw3cHLKhwrqTwVBJPHQ9eo55wGddXBVaUOdnTjgAYA+lHXk9aMDtRSOQB0xRQeuaO9AAeuaMDt26UfWjnv+NAAfrSDjAwMUvTgdKPc9aAD69aKBRzigA+nSg9aKOvJ60AH160duetAA9OlHFAAOBjp7Vy9x450GC/a1zcSKrhDPGgMfuQc5IHsOccZ4re1e3kvNJvLSMqJJ4HjUseAWUgZ9ua8RuLK8t75rCa3kW6DhDFjLFj0Ax1znjHXNJs0hFPc92jkSWNZYnWSNwGVlOQwPQg07gDA6Vk+D7C40zw3Z2N0FWaNWLKpyFyxbH4ZxWtwBxTIYHrVW807T7yUS3dja3DgbQ0sKsQPTJFN1fUbTSbF7y7fZEvAA+8x7Ko7n/PSuRi+IsBEnm6VIuEJTZMG3N2ByBge/P0NM0hRnNXijuuaTuOBWF4T8T2viBZUWFre5iAZ42cMCCSMqepxxngYyK3sCkTOEoPlktQ5xz1ox6CjtgUEmggPc9aO/A4oowP8KAPneWN4ZWiljaN0JVlYYKkdQR2r0H4QaVcLcXGsSIyQNEYIsrxJlgWI9htA6c59jXeXmm6deSiW80+0uXA2hpYVcgemSOnJq3TuelXzD2lPkStcBnFIBwOADSn60d6R5oHr7UHrmjAHTpR9aACk57gUp+9nr70d6ADnNBJz7Ue3ajmgA68nrRyevWjpwOlB6+1AB3oAHHAzRgde9B6/wBaADtiijAHSigAGcUDgYoP1o75oAAOOmKPpQOlJjB4AxQBxfxXtJprCzvFKbIHZXUthiWxjA7/AHT7/hnHn9na3N5dx2ttC0s8hwqDqT/h711HxDmun8RSRTtJ5Mar5KkfLgqMkevOefbHarXwvEn9r3JEY8v7Phn2ZwdwwN2OM88d8e1M9GlVdOkbfgjwqdCkmu7maOa6lTYPLB2xrnJAJ65wvYYxXUdeT1o/CikcNSpKpLmkHuetFH0oHTpg0EB796AOBxg0d80DgY/SgA570d6KD1oArXeoafaSiO6vraByNwWWVVJHrgn2qyPTtXh+pTXVxfzTXzSNcs58wyDDZHGCO2OmO3SvSvhtNdzeHAbppGVJWSEuP4ABwD3AOR+GO1B0VKHJG9zphwMD8qD1zRnjk0ew6UHOHsOlB60fTpR7nrQADgY6CijknJ696ABj0oAPbtRRgVQ8RxX82i3UWlyeXdsn7tt209RkA9iRkA+p6jrTSu7DSuy/x170HGa4f4ZWGs2kt013HNb2bDAimUqWk4+YA89OCe/HXHHcZPf8aqceWVr3HOPK7XCj370UHOfaoJA9fak9OBS8nk9aBwMDpQAGg9c0fzo56dqAKWqaXYaokaX9sswQkqdxBUnrgjBx/gKk06xtNOthbWUCwxAk4BJJJ7knk/8A1hVn69aKB3drB2oooHSgQYHbt04oHSjnqeteYeLPH1//AGhLaaI8cFvC+0T7VdpSMgkZyu09u/Gc84q4Qc3ZGtKlKo7RPT+aQAYHAGK8+8CeN7q+1CLTNY8pnl+WK4ACEtydrdBzwBgDnAwc5HoXeicHB2YqlKVN2kA4GB0o5PJ60ew6UHrUGZlan4d0XUbo3V5YrJMQFLh2UkDpnaRn/wDV6VpxxxxRrHEioiAKqqMAAdAB2p1HTgdKBuTejDtRx170YGc0UCCk9OBSjpRz3oAD1/rR7nrRRk9/xoAPYdKM+9GBSYweAMUALSDoOAKUcDHT2o9u1ABVG/1fTtPnht7y6jheX7qnPrjJwOB7nHQ+9Xh0xXJeJvCU2p6x9ut7qNBLgTCQHK4AGVx14HQ45HXnhO9tCopN6nW89+tHfgcVDZwLa2kFsmSsMaxqWOTgAD+lTUxBk96B9KKPc9aBBRR3o9+9ABzmgDjpRxR7nrQAV4Fr+lXOi6pNp9wrDY2Y2IwJEz8rDrwfrxyOor309c1DeWlrexCK9tobmMNuCSxhwD64Pfk/nWtKpyM6KFf2Tem54z8PtJuNS8S2jxIwhtJFmlkC5CBTkDt1Ix+Zxwa9s+tRWtvb2sC29rBFBCmdqRoFUc54A4FS0VKnO7ir1vayuHeg9aPYdKO/SsjAABijGOg4oOM570YA6UAHfpR2o5o5oAKD1oooAO2KPpQOlFABx2/CoL6V7axnuIrczyRRM6xL1cgZCjjvjFT4A6dulFMaPGtO8WeIRrUdyby4u2kdVa3GNsgyPlVcEKTjGQM8+9ey1lW/hzQrfUPt8Ol26T8bSF+VcYwVX7qngcgZrV7Yq6klLZG1apGbXKrAcZz3o4696KOnA6VmYAOnpRRRQAd+BxRxjig9etHTgdKAAdKMDt+FGAOB0oP6UAHGc0YGKMDtQeuaADvmjvmg9c/rRQAduaBnFIBwOAKUZxigAo9+9HsOlHbmgApAMY4FLzmjvQAHHWjv0o4xxR2560AB60Ud6TnuBQAvbAoyaO1FABRRRzQAcAYFHt2o70HrmgAo75oo7UAA6UDp0oA46c0UAAxiig9aB0oAO/Siig9c/rQAdeT1o4696MmgdKAA9c0HOaPr1oPWgAoNGT3/ABooAKOnA6VS1rU7PSLB769k2xrwAPvO3ZVHcn/6/QVmeHvFuk63dtaW3nQzBdypOoUv67cE5x6f4HFqEmuZLQdna50HTgDig/WiioEIAMDgAil7UUADFAAeuf1pO44FLRQAe560HrnvR0GBRQAc4560e/ejJxz1owO1AAM96O1FA4GB0oAKPc9aD9aOep60AHv3rO13WLHRrZbi9ZiWOEjQAu/rgHsO5/8ArVo+/evLfiPDdJ4lklmWTyJEXyGJyu0KMgenOePfPerhHmdjSnFSlZncaJ4n0nVAVjmFvJuCCKcqrMT0288+nHP6VtfhXhMcbyyoiIXkchVVRkknsPWvULDVk0Lw7psGrF2ujEP3Uajcqfw5BxjAwPqD15NZ3vJpIcoa2R0wzig9c1Fazw3Vuk9tIskLjKsKlPWmZAOlFGT3/GgcADGPYUAJ6cClHSjpwOlHQYHSgAPWj+VHbAo70AeZ/GCC7/tO0uSshs/J8tWz8ok3EkY7Ejb9ce3HGaXBd3F/BDYJI12XHlCM4YEc5B7YxnPbGa95vrS2vbSS0uoVlgkXayMOCP6H37VS0fQNI0iaSbT7NYZJBtZyzM2OuMsTj8OuB6V208UoU+W2ptGpaNjT75owBwOlHfNIOg4AriMRfYUZPf8AGjnNH40AFB60c0fjQAUAcelH40UAHf2oPWk7jgUv0oAMmgdPejv0pT35NACdOB0ooye9HTgdKACq2pWFnqVqba9gWaLIODkYI7gjkfhVmj27UxrQpaTpOn6VE8dhbLAHOWwSxP4k5x7fWqXiTw/DrEkc3ntBMg2l9u4MvJxjI7nr7n8Nv15NJ7nrRd3uNTad0V9Os4bCyjtLcMI4xgbjknnJJ/Gp/TgUtB+9nr70CbuA6c9aP50dOB0o70hB39qD19qCTmjgDA6UAA6Yo9+9FHagA7Ud80CigAwM8DijvR39qMDPSgA+nSjJ79aQduBS9qADryetJjkYApe+aO2KAD370npwKXmjtQAfSjAooHSgAo4HAo4AwOlH1oAD19fejpwOlHHag9f60AFGTQM4ooAABijA7fhRxQOBjGBQAd84ooycc0Z96AAdPT2o570DoOMUUABxnPej8KD1pB24FAC5Pf8AGjvx0o9z1pBnjgUAf//Z"
    
    # Day 3: Initial report with first photo
    test_data_day3 = {
        "patient_id": "p004",
        "action": "took",
        "reason": "side_effects",
        "medication_id": "med_allopurinol_300mg",
        "notes": "Red itchy rash on arms and torso started yesterday. Should I stop taking this?",
        "image": mock_image_day3,  # Photo of initial rash
        "image_day": 3,
        "timestamp": "2026-02-20T09:00:00.000Z"
    }
    
    print("\n2. Day 3 Test data (Initial Report):")
    print(f"   Patient: {test_data_day3['patient_id']}")
    print(f"   Action: {test_data_day3['action']}")
    print(f"   Reason: {test_data_day3['reason']}")
    print(f"   Notes: {test_data_day3['notes']}")
    print(f"   Image: {'✓ Included (Day 3 baseline)' if test_data_day3.get('image') else '✗ No image'}")
    
    # Execute Day 3 workflow
    print("\n3. Executing Day 3 workflow...")
    result_day3 = orchestrator.route_patient_action(test_data_day3)
    
    # Display Day 3 results
    print("\n4. Day 3 Workflow Results:")
    print(f"   Status: {result_day3.get('state')}")
    print(f"   Workflow ID: {result_day3.get('workflow_id')}")
    
    agents_executed = result_day3.get('agents_executed', [])
    print(f"\n   Agents Executed: {len(agents_executed)}")
    
    for i, agent_result in enumerate(agents_executed, 1):
        agent_name = agent_result.get('agent', 'unknown')
        agent_status = agent_result.get('status', 'unknown')
        exec_time = agent_result.get('execution_time_ms', 0)
        print(f"   {i}. {agent_name.upper()}: {agent_status} ({exec_time}ms)")
    
    # Check MedGemma Vision consultation
    risk_agent = next((a for a in agents_executed if a.get('agent') == 'risk_assessment'), None)
    if risk_agent:
        medgemma_consulted = risk_agent.get('result', {}).get('medgemma_consulted', False)
        vision_used = risk_agent.get('result', {}).get('vision_analysis_performed', False)
        print(f"\n   MedGemma consulted: {'✅ Yes' if medgemma_consulted else '❌ No'}")
        print(f"   Vision analysis: {'✅ Performed' if vision_used else '❌ Not performed'}")
    
    print("\n" + "-" * 80)
    
    # Day 4: Follow-up with second photo
    test_data_day4 = {
        "patient_id": "p004",
        "action": "took",
        "reason": "side_effects",
        "medication_id": "med_allopurinol_300mg",
        "notes": "Rash seems slightly better. Less itchy. Continuing as instructed.",
        "image": mock_image_day4,  # Photo showing improvement
        "image_day": 4,
        "previous_images": [mock_image_day3],  # For temporal comparison
        "timestamp": "2026-02-21T09:00:00.000Z"
    }
    
    print("\n5. Day 4 Test data (Follow-up):")
    print(f"   Patient: {test_data_day4['patient_id']}")
    print(f"   Notes: {test_data_day4['notes']}")
    print(f"   Image: {'✓ Included (Day 4 progress)' if test_data_day4.get('image') else '✗ No image'}")
    print(f"   Previous images: {len(test_data_day4.get('previous_images', []))} baseline photo(s)")
    
    # Execute Day 4 workflow
    print("\n6. Executing Day 4 workflow...")
    result_day4 = orchestrator.route_patient_action(test_data_day4)
    
    print("\n7. Day 4 Workflow Results:")
    print(f"   Status: {result_day4.get('state')}")
    agents_executed_day4 = result_day4.get('agents_executed', [])
    print(f"   Agents Executed: {len(agents_executed_day4)}")
    
    risk_agent_day4 = next((a for a in agents_executed_day4 if a.get('agent') == 'risk_assessment'), None)
    if risk_agent_day4:
        vision_used = risk_agent_day4.get('result', {}).get('vision_analysis_performed', False)
        temporal_comparison = risk_agent_day4.get('result', {}).get('temporal_comparison', False)
        print(f"   Vision analysis: {'✅ Performed' if vision_used else '❌ Not performed'}")
        print(f"   Temporal tracking: {'✅ Comparing Day 3→4' if temporal_comparison else '❌ No comparison'}")
    
    print("\n" + "-" * 80)
    
    # Day 5: Second follow-up with third photo
    test_data_day5 = {
        "patient_id": "p004",
        "action": "took",
        "reason": "side_effects",
        "medication_id": "med_allopurinol_300mg",
        "notes": "Rash definitely improving! Much better than Day 3. Still taking medication.",
        "image": mock_image_day5,  # Photo showing further improvement
        "image_day": 5,
        "previous_images": [mock_image_day3, mock_image_day4],  # For temporal comparison
        "timestamp": "2026-02-22T09:00:00.000Z"
    }
    
    print("\n8. Day 5 Test data (Second Follow-up):")
    print(f"   Patient: {test_data_day5['patient_id']}")
    print(f"   Notes: {test_data_day5['notes']}")
    print(f"   Image: {'✓ Included (Day 5 progress)' if test_data_day5.get('image') else '✗ No image'}")
    print(f"   Previous images: {len(test_data_day5.get('previous_images', []))} photo(s) for temporal tracking")
    
    # Execute Day 5 workflow
    print("\n9. Executing Day 5 workflow...")
    result_day5 = orchestrator.route_patient_action(test_data_day5)
    
    print("\n10. Day 5 Workflow Results:")
    print(f"   Status: {result_day5.get('state')}")
    agents_executed_day5 = result_day5.get('agents_executed', [])
    print(f"   Agents Executed: {len(agents_executed_day5)}")
    
    risk_agent_day5 = next((a for a in agents_executed_day5 if a.get('agent') == 'risk_assessment'), None)
    if risk_agent_day5:
        vision_used = risk_agent_day5.get('result', {}).get('vision_analysis_performed', False)
        temporal_comparison = risk_agent_day5.get('result', {}).get('temporal_comparison', False)
        healing_trend = risk_agent_day5.get('result', {}).get('healing_trend', 'unknown')
        print(f"   Vision analysis: {'✅ Performed' if vision_used else '❌ Not performed'}")
        print(f"   Temporal tracking: {'✅ Comparing Day 3→4→5' if temporal_comparison else '❌ No comparison'}")
        print(f"   Healing trend: {healing_trend}")
    
    # Verify expected behavior
    print("\n11. Validation:")
    expected_agents = 5
    actual_agents_day3 = len(result_day3.get('agents_executed', []))
    actual_agents_day5 = len(result_day5.get('agents_executed', []))
    
    validation_passed = True
    
    if actual_agents_day3 == expected_agents:
        print(f"   ✅ PASS: Day 3 - All {expected_agents} agents executed")
    else:
        print(f"   ❌ FAIL: Day 3 - Expected {expected_agents} agents, got {actual_agents_day3}")
        validation_passed = False
    
    if actual_agents_day5 == expected_agents:
        print(f"   ✅ PASS: Day 5 - All {expected_agents} agents executed")
    else:
        print(f"   ❌ FAIL: Day 5 - Expected {expected_agents} agents, got {actual_agents_day5}")
        validation_passed = False
    
    # Check vision capability was used
    vision_performed = any(
        a.get('result', {}).get('vision_analysis_performed', False)
        for a in [risk_agent, risk_agent_day4, risk_agent_day5]
        if a
    )
    
    if vision_performed:
        print(f"   ✅ PASS: MedGemma Vision capability utilized")
    else:
        print(f"   ⚠️  WARNING: Vision analysis not performed (may need vision API integration)")
    
    print("\n" + "=" * 80)
    
    if validation_passed:
        print("✅ Scenario 4 test completed successfully!")
        print("   - Image data captured across 3 days")
        print("   - All 5 agents executed correctly")
        print("   - Temporal healing tracking functional")
    else:
        print("❌ Scenario 4 test encountered issues")
    
    print("=" * 80)
    
    return {
        "day3": result_day3,
        "day4": result_day4,
        "day5": result_day5,
        "validation_passed": validation_passed
    }

if __name__ == "__main__":
    try:
        result = test_scenario4()
        print("\n✅ Test execution completed")
        sys.exit(0 if result.get("validation_passed") else 1)
    except Exception as e:
        print(f"\n❌ Test failed with error: {str(e)}")
        import traceback
        traceback.print_exc()
        sys.exit(1)
